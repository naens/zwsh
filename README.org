#+TITLE: zwsh
A Zpm3/Wordstar mode/theme for zsh

* Description
A zsh mode that uses Zpm3/Wordstar keybindings and functionality.  It can
 - select copy and move blocks of text,
 - edit multiline commands,
 - import and export from and to files.

* Other doc files
 + [[doc/wsblock.org][wsblock]]
 + [[doc/wsdialog.org][wsdialog]]
 + [[doc/wsedit.org][wsedit]]
 + [[doc/wsfind.org][wsfind]]
 + [[doc/wskeys.org][key description]]
 + [[doc/wstext.org][the concept of separating the text from the screen]]

* Tests
The directory *tests* contains tests to test different modules independently
from the whole application.  Also allows to test features and cases rarely or
not used in the main application, which could be useful in future versions.

---------

* To do plan
** wsline
 + [DONE] Test edit, navigation, functionality

** wsdialog
 + Pre-fill (ex. filename for save functions...)

** wsedit
Without implementing wsblock keybindings, finish wsedit mode:
 + [DONE] keybindings
 + [DONE] import from file
 + [DONE] exit saving / not saving / putting into buffer wsedit mode
 + [DONE] enter wsedit mode: using buffer / using file
 + [DONE] add fullscreen mode
 + fullscreen mode
   - switch with keybinding
   - only fullscreen possible when file with too many lines
 + [DONE] add vertical scroll
 + [DONE] add horizontal scroll
 + support tabs of different lengths
 + save file: if known, prefill (+ same for main mode), clear file name on
 zle-init
 + not always refresh on load file

** CLI tools
 * pipe mode: command that reads pipe and displays it in editor
 * mode: command with argument a file name: reads and displays in editor

** wsblock
Rewrite wsblock for edit, normal and wsline modes:
 + [DONE]review wsblock specifications, redefine behaviour, parameters, variables...
 + [DONE]implement marks: places that move with the text: track position, column, line
(also for wsline)
 + column selection
 + wsedit: right border wsblock
 + insert and move blocks
 + reimplement block functionality, on wsline, substitute CR's and LF's with a
normal character, like space or a special substitution character (in order to
restore space if copying to edit or normal mode)
 + test on normal, edit and wsline modes

*** wsedit and wsblock
 + describe ws tab behaviour (! screen edge, horizontal scroll...)
!!! use tab size variable/constant instead of 8 (?can it be changed in
options? if so test different sizes)
 + implement tab in fullscreen mode
 + when column mode is off, behaviour same as normal mode
 + column mode works only in wsedit mode
 + column mode is column select and column paste
 + tabs are seen as 8 spaces
Tabs are included if partially included on the left side, but on the right
they are included only if selected completely.
 + launch wsedit as an application (runable command / script)
 + pipe to runable command: read text from standard input and put into
wsedit.

** prompt
 + Directory aliases
 + Directory alias completion (alias completion + subpath completion)
 + Fix directory aliases
 + jump to alias without ~cd~

** Marks
[DONE]
Marks are points in text which have a name and are moved when text get
inserted or deleted (they don't get deleted with the text, if a selection
containing a mark is deleted, the mark is moved to the beginning of the
selection. ~<B>~ and ~<K>~ are marks.

*** Implementation of Marks
[DONE]
Marks have a name and a location, they are associated with a location in
text and can move when text is deleted or inserted.

Marks are stored in an array (wstext_marks), where each element is a pair name
position.

** global
 + set user for files in ~$HOME~
 + separate ZWSHDIR from ZDOTDIR: let the user use his own files like ~.zprofile~,
 ~.zshrc~, ~.zshenv~...  Load zwsh source file using a command in one of these files.
 + [DONE] implement the array of marks in the text
 + delete & undelete: ws style
 + organize files: wskeys <--> wstext
 + functions in wsfun, wstxtfun: remove unused / merge similar by making
functions general
 + refresh on screen resize
 + write wiki documentation
 + use wiki for todo lists
 + make it possible to separate editable (history, settings) part of the
 application from the executable in order to install a usable version for
 usage and have another for testing.
 + On delete char/word before double-quote when it's the last character: it is
 also deleted.
 + Take into account ~$PS1~ when going up/down

** add superuser functionality
 + if no right to read/write, display superuser prompt 
 + when opening read only file: add to status bar (? disallow editing ?)
